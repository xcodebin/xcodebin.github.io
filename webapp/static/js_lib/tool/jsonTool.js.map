{"version":3,"sources":["tool/jsonTool.coffee"],"names":[],"mappings":";AASA;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,QAAA;EAAA;;AA4BM;EACQ,kBAAA;AACV,QAAA;IADW,sBAAM;IAAN,IAAC,CAAA,OAAD;IAAM,IAAC,CAAA,SAAD;AACjB,YAAO,IAAC,CAAA,IAAR;AAAA,WACO,MADP;QACmB,IAAC,CAAA,IAAD,CAAM,IAAC,CAAA,MAAO,CAAA,CAAA,CAAd;AADnB;EADU;;qBAKZ,IAAA,GAAK,SAAC,IAAD;AACH,QAAA;IAAC,gBAAD,EAAM,cAAN,EAAU,gBAAV,EAAe,0BAAf,EAAyB;IACzB,IAAY,CAAC,GAAb;AAAA,aAAO,KAAP;;;MACA,OAAQ;;WACR,IAAC,CAAA,GAAD,GAAO,CAAC,CAAC,IAAF,CACL;MAAA,KAAA,EAAM,IAAN;MACA,IAAA,EAAM,IADN;MAEA,GAAA,EAAK,GAFL;MAGA,IAAA,EAAM,IAAI,CAAC,SAAL,CAAe,IAAf,CAHN;MAIA,QAAA,EAAS,MAJT;MAKA,WAAA,EAAc,gCALd;MAMA,OAAA,EAAQ,SAAC,IAAD;iDAAQ,UAAW;MAAnB,CANR;MAOA,KAAA,EAAO,SAAC,GAAD;+CAAO,QAAS;MAAhB,CAPP;KADK;EAJJ;;;;;;AAiBP,CAAC,SAAA;EACC,CAAC,CAAC,QAAF,GAAa,SAAA;AACX,QAAA;IADY,qBAAK;WACb;;;;OAAA,QAAA,EAAS,CAAA,IAAK,SAAA,WAAA,MAAA,CAAA,CAAd;EADO;SAIb,CAAC,CAAC,QAAQ,CAAC,IAAX,GAAiB;AALlB,CAAD,CAAA,CAAA","file":"jsonTool.js","sourcesContent":["# About: json插件\r\n# Other:\r\n# Created: Xiaolong WU on 16/4/15 下午10:14.\r\n# Editored:\r\n# VersionHistory:\r\n#   V16.04.15-01  初始化构造 bug难以避免\r\n# Dependencies:\r\n#   jquery  ^2.2.2\r\n#   JSON-js\r\n###\r\n  $.jsonTool() json插件\r\n  $.fn.jsonTool.opts 全局参数设置\r\n\r\n  opts 配置\r\n    ajax(obj): ajax请求方法\r\n        type(str): 请求方式 post post方式请求  get get请求\r\n        url(str): 请求url\r\n        data(obj/str):以json格式发送的对象或字符串\r\n        onSuccess(fn(data)):成功回调方法\r\n        onError(fn(err)):失败回调方法\r\n\r\n  fn 方法\r\n    ajax(obj): ajax请求\r\n      type(str): 请求方式 post post方式请求  get get请求\r\n      url(str): 请求url\r\n      data(obj/str):以json格式发送的对象或字符串\r\n      onSuccess(fn(data)):成功回调方法\r\n      onError(fn(err)):失败回调方法\r\n\r\n  event 事件\r\n\r\n\r\n###\r\n\r\n\r\n\r\n\r\nclass jsonTool\r\n  constructor:(@opts,@others...)->\r\n    switch @opts\r\n      when 'ajax' then @ajax(@others[0])\r\n\r\n\r\n  ajax:(opts)->\r\n    {type,url,data,onSuccess,onError}=opts\r\n    return @ if !url\r\n    type ?= 'post'\r\n    @xhr = $.ajax(\r\n      async:true\r\n      type: type\r\n      url: url\r\n      data: JSON.stringify(data)\r\n      dataType:\"json\"\r\n      contentType : 'application/json;charset=utf-8'\r\n      success:(data)->onSuccess?(data)\r\n      error: (res)->onError?(res)\r\n    )\r\n\r\n\r\n    \r\n(->\r\n  $.jsonTool = (opts,others...)->\r\n    new jsonTool(opts,others...)\r\n\r\n  # 表格全局参数\r\n  $.jsonTool.opts ={}\r\n)()"]}