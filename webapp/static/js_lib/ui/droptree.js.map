{"version":3,"sources":["ui/droptree.coffee"],"names":[],"mappings":"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","file":"droptree.js","sourcesContent":["# About: 下拉树插件\r\n# Other:\r\n# Created: Xiejinghang on 16/7/3 23:00 pm.\r\n# Editored: Xiaolong WU on 16/8/10 下午3:24.\r\n# VersionHistory:\r\n#   V16.08.10  进行优化 完善\r\n#   V16.07.15  初始化构造\r\n# Dependencies:\r\n#   jquery  ^2.2.2\r\n#   semantic ^2.1.8\r\n#   malihu-custom-scrollbar-plugin ^3.1.3\r\n#   underscore  ^1.8.3\r\n#   jstree ^3.3.1\r\n# TODO:\r\n#\r\n###\r\nApi:\r\n  attr 属性 可以console.log打印下即可知道对象属性和方法\r\n      $ele 下拉树组件对象jq节点对象\r\n      $treeList 树列表jq节点对象\r\n      $defInfo 默认提示节点\r\n      $searchTreeInp 查询输入框对象\r\n      $searchTreeBut 查询按钮对象\r\n      $treeValue tree的值\r\n      selectArr 选择节点数据\r\n      data tree数据对象\r\n\r\n  opt 配置\r\n      url(str):获取数据地址  当为null时无加载显示  url与data只有一个会生效\r\n      data(str):静态数据初始化  结构为json\r\n      name(str):控件的name值 默认为dropTree\r\n      initLoad(bool):初始化是否载入数据 def:true 载入数据 false 不初始化载入数据\r\n      queryParams(obj): 数据参数 {name: 'easyui',subject: 'datagrid'}\r\n      loader(fn(query请求参数)):请求之前调用方法,返回对象将会作为查询条件的追加,返回参数对象进行查询 返回false将终止查询\r\n      loadFilter(fn(data)):加载成功后可对数据进行调整/过滤最终返回数据 data为json格式\r\n      selectWay(str):选择方式 def: radio只能单选  multi 可多选\r\n      multiUnitText(str):多选时描述的单位 def:\"个\" 如:\"已选 1 个机构\"此时 multiUnitText的值就是\"个机构\"\r\n      promptText(str):输入框空值提示文本 def:\"请选择\"\r\n      selectText(str):检索框空值提示文本 def:\"搜索信息\"\r\n      defValueId(array[id]):默认值选中\r\n      maxHeight(num):最大高度,def:200 px\r\n      openAllNode(bool):加载完展开全部节点 def:false 不展开 true展开\r\n      onDropReady(fn):下拉组件初始化完成后 回调\r\n      onLoadReady(fn(data加载到的数据json)):树数据加载完成后 回调\r\n      onMakeReady(fn):下拉组件最后构建完成后 回调\r\n      onSelectNode(fn(node节点数据,selectArr全部选中信息)):单击选中节点后 回调 返回tree node对象\r\n      onUnSelectNode(fn(node节点数据,selectArr全部选中信息)):单击取消选中节点后 回调 返回tree node对象\r\n      onChangeSelectNode(fn(node节点数据,selectArr全部选中信息)):改变选中节点后 回调 返回tree node对象\r\n      onShowDrop(fn):展示下拉树前回调\r\n      onHideDrop(fn):隐藏下拉树前回调\r\n      onClearSelect(fn)清空选择回调\r\n\r\n\r\n  fn 方法\r\n      setUrl(url):设置获取数据url地址\r\n      setData(data): 设置静态数据初始化 结构为json\r\n      getDate(): 获取树data数据\r\n      showDrop(): 展示下拉树\r\n      hideDrop(): 隐藏下拉树\r\n      selectNode(nodeId:str/array[str]): 根据树节点id 选中节点\r\n      unSelectNode(nodeId:str/array[str]): 根据树节点id 取消选中节点\r\n      clearSelect(): 清空选择\r\n      ?addData(data): 添加数据至tree结构  json结构str数据\r\n      loadTree(params 参数信息):加载树信息 params 结构如下{name: 'easyui',subject: 'datagrid'}\r\n      getSelects():获取选中节点数据对象 返回array[obj] obj包含:\"id\"节点id \"parent\"父节点id \"text\"文本名称\r\n\r\n  event 事件\r\n      onDropReady(fn):下拉组件初始化完成后 回调\r\n      onLoadReady(fn(data加载到的数据json)):树数据加载完成后 回调\r\n      onMakeReady(fn):下拉组件最后构建完成后 回调\r\n      onSelectNode(fn(node节点数据,selectArr全部选中信息)):单击选中节点后 回调 返回tree node对象\r\n      onUnSelectNode(fn(node节点数据,selectArr全部选中信息)):单击取消选中节点后 回调 返回tree node对象\r\n      onChangeSelectNode(fn(node节点数据,selectArr全部选中信息)):改变选中节点后 回调 返回tree node对象\r\n      onShowDrop(fn):展示下拉树前回调\r\n      onHideDrop(fn):隐藏下拉树前回调\r\n      onClearSelect(fn)清空选择回调\r\n\r\n\r\n###\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass droptree\r\n\r\n  constructor:(@$ele,opts,others...)->\r\n    @defaults= # 默认参数\r\n      name:'dropTree' # 控件的name值 默认为dropTree\r\n      initLoad:true # 初始化是否载入数据 def:true 载入数据 false 不初始化载入数据\r\n      selectWay:\"radio\" # 选择方式 def: radio只能单选  multi 可多选\r\n      multiUnitText:\"个\" # 多选时描述的单位 def:\"个\" 如:\"已选 1 个机构\"此时 multiUnitText的值就是\"个机构\"\r\n      promptText:\"请选择\" # 输入框空值提示文本 def:\"请选择\"\r\n      selectText:\"搜索信息\" # 检索框空值提示文本 def:\"搜索信息\"\r\n      maxSelect:0 # 最大选择数,def:0 无限制,>0时仅对selectWay为\"multi\"多选模式起作用\r\n      maxHeight:200 #最大高度,def:200 px\r\n      openAllNode:false # 加载完展开全部节点 def:false 不展开 true展开\r\n\r\n\r\n\r\n    @opt = $.extend({}, @defaults,$.fn.droptree.opts, opts)\r\n    @creatTree()\r\n    @loadTree() if @opt.initLoad and (@opt.data or @opt.url)  # 加载数据\r\n\r\n  ###\r\n    执行路由\r\n    opts\r\n  ###\r\n  perform:(opts,others...)->\r\n    if _.isObject opts # 进行参数覆盖\r\n      @opt = $.extend({}, @opt,opts)\r\n    else\r\n      if _.isString opts # 执行方法调用\r\n        fun = eval(\"this.#{opts}\")\r\n        fun(others[0])\r\n\r\n\r\n  ###\r\n    树事件\r\n    opts\r\n  ###\r\n  eventDrop:->\r\n    # 清理按钮\r\n    @$clearBut.off('click').on 'click',(e)=>\r\n      @clearSelect()\r\n      @hideDrop()\r\n\r\n    # 查询按钮\r\n    @$searchTreeBut.off('click').on 'click',(e)=>\r\n      @searchTree()\r\n\r\n    # 查询栏\r\n    @$searchTreeInp.off('keydown').on 'keydown',(e)=>\r\n      if e.keyCode==13\r\n        @searchTree()\r\n        e.stopPropagation()\r\n\r\n\r\n  ###\r\n    创建树节点\r\n    opts\r\n  ###\r\n  creatTree:->\r\n    html = \"\"\"\r\n            <div class=\"ui selection dropdown the-droptree\">\r\n              <i class=\"dropdown icon\"></i>\r\n              <input ids='treeValue' style='display: none;' name=\"#{@opt.name}\">\r\n              <div ids='defInfo' class=\"default text\">#{@opt.promptText}</div>\r\n              <div class=\"menu tree-content\">\r\n                <div class=\"ui input action\">\r\n                  <input ids='searchTreeInp' type=\"text\" placeholder=\"#{@opt.selectText}\" />\r\n                  <button ids='searchTreeBut' type=\"button\" class=\"ui teal button icon\">\r\n                    <i class=\"icon refresh\"></i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"ui divider\"></div>\r\n                <div ids='treeList'></div>\r\n                <div class=\"ui divider\"></div>\r\n                <div class=\"droptree-foot\">\r\n                  <button ids='clearBt' type=\"button\" class=\"teal ui button fluid\">清空选择</button>\r\n                </div>\r\n                <div class=\"item the-dn active selected\"></div>\r\n              </div>\r\n            </div>\r\n           \"\"\"\r\n    @$ele.after(html)\r\n    $dropTree = @$ele.next()\r\n    $dropTree.data(\"obj\",@$ele.data(\"obj\"))\r\n    @$ele.remove()\r\n    @$ele = $dropTree\r\n    @$treeList = @$ele.find(\"[ids='treeList']\")\r\n    @$defInfo  = @$ele.find(\"[ids='defInfo']\")\r\n    @$clearBut =  @$ele.find(\"[ids='clearBt']\")\r\n    @$searchTreeInp = @$ele.find(\"[ids='searchTreeInp']\")\r\n    @$searchTreeBut = @$ele.find(\"[ids='searchTreeBut']\")\r\n    @$treeValue =  @$ele.find(\"[ids='treeValue']\")\r\n    @$ele.dropdown(\r\n      onShow:=>\r\n        height = @$ele.css('height')\r\n        height = height.substring(0,height.indexOf('px'))\r\n        maxHeight = $(window).height()-@$ele.offset().top-height-20-40-41\r\n        if @opt.maxHeight> parseInt(maxHeight)\r\n          if maxHeight>100\r\n            @$treeList.css(\"height\",\"#{maxHeight}px\")\r\n          else\r\n            @$treeList.css(\"height\",\"100px\")\r\n        else\r\n          @$treeList.css(\"height\",\"#{@opt.maxHeight}px\")\r\n        @opt.onShowDrop?()\r\n      onHide:=>\r\n        @opt.onHideDrop?()\r\n    )\r\n    @opt.onDropReady?() # 下拉组件初始化完成后 回调\r\n    @eventDrop()\r\n\r\n\r\n\r\n  ###\r\n    加载树数据\r\n    opts\r\n  ###\r\n  loadTree:(opts)->\r\n    if @opt.url\r\n      query = if opts then  $.extend({}, @opt.queryParams,opts) else @opt.queryParams\r\n      @loaderQuery = @opt.loader?(query:query) # 请求之前调用方法,返回对象将会作为查询条件的追加,返回fasle将终止查询\r\n      if @loaderQuery isnt false\r\n        $.jsonTool('ajax',{\r\n          url:@opt.url\r\n          data:$.extend(query,@loaderQuery)\r\n          onSuccess:(data)=>\r\n            treeData = data.data\r\n            treeData = eval(\"(\" + treeData + \")\") if _.isString treeData\r\n            if treeData and treeData.length>0\r\n              if @opt.loadFilter\r\n                @makeTree({treeData:@opt.loadFilter({data:treeData})})\r\n              else\r\n                @makeTree({treeData:treeData})\r\n            @opt.onLoadReady?(data:treeData) # 树数据加载完成后 回调\r\n          onError:(err)=>\r\n            console.log \"树数据加载error\"\r\n            #todo\r\n        })\r\n    else\r\n      if @opt.data\r\n        treeData = @opt.data\r\n        treeData = eval(\"(\" + treeData + \")\") if _.isString treeData\r\n        if treeData and treeData.length>0\r\n          if @opt.loadFilter\r\n            @makeTree({treeData:@opt.loadFilter({data:treeData})})\r\n          else\r\n            @makeTree({treeData:treeData})\r\n        @opt.onLoadReady?(data:treeData) # 树数据加载完成后 回调\r\n\r\n\r\n  ###\r\n    树事件\r\n    opts\r\n  ###\r\n  eventTree:->\r\n    @$treeList.unbind('loaded.jstree').on(\"loaded.jstree\",(event, data)=>\r\n      @$treeList.jstree(\"open_all\") if @opt.openAllNode # 是否全部展开\r\n      if @opt.defValueId and @opt.defValueId.length>0 # 构造默认值\r\n        @selectNode(nodeId:@opt.defValueId)\r\n    )\r\n\r\n    # 选择节点\r\n    @$treeList.unbind('select_node.jstree').bind(\"select_node.jstree\",(node,selected)=>\r\n      @updateValue()\r\n      @opt.onSelectNode?(node:selected.node,selectArr:@selectArr) # 单击选中节点后 回调\r\n      @opt.onChangeSelectNode?(node:selected.node,selectArr:@selectArr) # 改变选中节点后 回调\r\n      @hideDrop() if @opt.selectWay is 'radio'\r\n    )\r\n\r\n    # 取消选择节点\r\n    @$treeList.unbind('deselect_node.jstree').bind(\"deselect_node.jstree\",(node,selected)=>\r\n      @updateValue()\r\n      @opt.onUnSelectNode?(node:selected.node,selectArr:@selectArr) # 单击取消选中节点后 回调\r\n      @opt.onChangeSelectNode?(node:selected.node,selectArr:@selectArr) # 改变选中节点后 回调\r\n    )\r\n\r\n\r\n\r\n  ###\r\n    构造tree\r\n    opts\r\n  ###\r\n  makeTree:(opts)->\r\n    {treeData}=opts\r\n    treeConfig =\r\n      \"core\":\r\n        \"data\": treeData\r\n        \"themes\":\r\n          \"icons\": false\r\n          \"dots\": false\r\n      \"search\":\r\n        \"case_insensitive\": true\r\n        \"show_only_matches\": true\r\n\r\n    switch @opt.selectWay # 单选多选处理\r\n      when 'radio'\r\n        treeConfig.plugins = [\"search\"]\r\n      when 'multi'\r\n        treeConfig.plugins = [\"checkbox\", \"search\"]\r\n        treeConfig.checkbox =\r\n          \"keep_selected_style\": false\r\n\r\n    @$treeList.jstree('destroy') if @$treeList\r\n    @$treeList.jstree(treeConfig).bind 'ready.jstree',(event, data)=>\r\n      @opt.onMakeReady?()\r\n    @eventTree()\r\n\r\n\r\n  ###\r\n    设置url地址\r\n    opts\r\n      url:新的url地址\r\n  ###\r\n  setUrl:(opts)->\r\n    {url}=opts if opts\r\n    @opt.url = url if url\r\n\r\n  ###\r\n    设置数据\r\n    opts\r\n      data 静态数据初始化 结构为json\r\n  ###\r\n  setData:(opts)->\r\n    {data}=opts if opts\r\n    @opt.data = data if data\r\n    @loadTree()\r\n\r\n  ###\r\n    获取树data数据\r\n    opts\r\n  ###\r\n  getDate:(opts)->\r\n    @opt.data\r\n\r\n  ###\r\n    展示下拉树\r\n    opts\r\n  ###\r\n  showDrop:(opts)->\r\n    @$ele.dropdown('show')\r\n\r\n\r\n\r\n  ###\r\n    隐藏下拉树\r\n    opts\r\n  ###\r\n  hideDrop:(opts)->\r\n    @$ele.dropdown('hide')\r\n\r\n\r\n\r\n  ###\r\n    根据树节点id 选中节点\r\n    opts\r\n      nodeId  str/array[str] 节点id 选中节点\r\n  ###\r\n  selectNode:(opts)->\r\n    {nodeId} = opts\r\n    # @$searchTreeInp.val('')\r\n    # @$treeList.jstree('search', '')\r\n    if _.isString nodeId\r\n      @clearSelect() if @opt.selectWay is 'radio'\r\n      @$treeList.jstree('select_node', nodeId)\r\n    if _.isArray nodeId\r\n      if @opt.selectWay is 'radio'\r\n        @clearSelect() if @opt.selectWay is 'radio'\r\n        @$treeList.jstree('select_node', nodeId[0])\r\n      else\r\n        @$treeList.jstree('select_node', nodeId)\r\n\r\n  ###\r\n    根据树节点id 取消选中节点\r\n    opts\r\n      nodeId  str/array[str]  树节点id\r\n  ###\r\n  unSelectNode:(opts)->\r\n    {nodeId} = opts\r\n    if _.isString nodeId\r\n      @$treeList.jstree('deselect_node', nodeId)\r\n    if _.isArray nodeId\r\n      if @opt.selectWay is 'radio'\r\n        @$treeList.jstree('deselect_node', nodeId[0])\r\n      else\r\n        @$treeList.jstree('deselect_node', nodeId)\r\n\r\n\r\n  ###\r\n    更新下拉框值\r\n    opts\r\n  ###\r\n  updateValue:(opts)->\r\n    @selectArr= @$treeList.jstree('get_selected',true)\r\n    if @opt.selectWay is 'radio'\r\n      @$treeValue.val true\r\n      @$ele.dropdown('set text', @selectArr[0].text)\r\n    else\r\n      if @selectArr.length>0\r\n        @$treeValue.val true\r\n        @$ele.dropdown('set text', \"已选 #{@selectArr.length} #{@opt.multiUnitText}\")\r\n      else\r\n        @clearSelect()\r\n\r\n\r\n  ###\r\n    清空选择\r\n    opts\r\n  ###\r\n  clearSelect:()->\r\n    @selectArr = null\r\n    @$treeList.jstree('deselect_all')\r\n    @$searchTreeInp.val('') # 清空搜索框\r\n    @$treeList.jstree('search', '') # 清空搜索内容\r\n    if @opt.defValueId # 有默认值\r\n      nodeId = @opt.defValueId\r\n      if _.isString nodeId\r\n        @$treeList.jstree('select_node', nodeId)\r\n      if _.isArray nodeId\r\n        if @opt.selectWay is 'radio'\r\n          @$treeList.jstree('select_node', nodeId[0])\r\n        else\r\n          @$treeList.jstree('select_node', nodeId)\r\n    else # 无默认值\r\n      @$treeValue.val ''\r\n      @$ele.dropdown('set text', null)\r\n      @$defInfo.addClass(\"default\").text(\"#{@opt.promptText}\")\r\n      @opt.onChangeSelectNode?(node:null,selectArr:@selectArr) # 改变选中节点后 回调\r\n    @opt.onClearSelect?() # 清空选择回调\r\n\r\n  ###\r\n    检索树节点\r\n    opts\r\n  ###\r\n  searchTree:()->\r\n    seaVal = @$searchTreeInp.val()\r\n    @$treeList.jstree('search', seaVal)\r\n\r\n\r\n  ###\r\n    获取选择节点数据对象集合\r\n    opts\r\n  ###\r\n  getSelects:()->\r\n    @selectArr\r\n\r\n  ###\r\n    下拉组件初始化完成后 回调\r\n    opts\r\n  ###\r\n  onDropReady:(opts)->\r\n    @opt.onDropReady=opts\r\n\r\n  ###\r\n    树数据加载完成后 回调\r\n    opts\r\n  ###\r\n  onLoadReady:(opts)->\r\n    @opt.onLoadReady=opts\r\n\r\n  ###\r\n    单击选中节点后 回调\r\n    opts\r\n  ###\r\n  onSelectNode:(opts)->\r\n    @opt.onSelectNode = opts\r\n\r\n  ###\r\n    单击取消选中节点后 回调\r\n    opts\r\n  ###\r\n  onUnSelectNode:(opts)->\r\n    @opt.onUnSelectNode = opts\r\n\r\n  ###\r\n    改变选中节点后 回调 返回tree node对象\r\n    opts\r\n  ###\r\n  onChangeSelectNode:(opts)->\r\n    @opt.onChangeSelectNode = opts\r\n\r\n  ###\r\n    展示下拉树前回调\r\n    opts\r\n  ###\r\n  onShowDrop:(opts)->\r\n    @opt.onShowDrop = opts\r\n\r\n  ###\r\n    隐藏下拉树前回调\r\n    opts\r\n  ###\r\n  onHideDrop:(opts)->\r\n    @opt.onHideDrop = opts\r\n\r\n  ###\r\n    清空选择回调\r\n    opts\r\n  ###\r\n  onClearSelect:(opts)->\r\n    @opt.onClearSelect = opts\r\n\r\n\r\n  ###\r\n    下拉组件最后构建完成后 回调\r\n    opts\r\n  ###\r\n  onMakeReady:(opts)->\r\n    @opt.onMakeReady = opts\r\n\r\n\r\n\r\n(->\r\n  $.fn.droptree = (opts,others...)->\r\n    obj = this.data(\"obj\")\r\n    if obj\r\n      obj.perform(opts,others...)\r\n    else\r\n      obj = new droptree(this,opts,others...)\r\n      this.data(\"obj\",obj)\r\n    return obj\r\n\r\n  # 全局参数\r\n  $.fn.droptree.opts ={}\r\n)()"]}